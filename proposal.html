<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Will you be my Valentine?">
    <title>A Special Question üíï</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600&family=Outfit:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">

    <style>
        /* Proposal-specific styles */
        .proposal-emoji {
            font-size: 5rem;
            display: block;
            margin-bottom: var(--space-xl);
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes heartbeat {

            0%,
            100% {
                transform: scale(1);
            }

            15% {
                transform: scale(1.15);
            }

            30% {
                transform: scale(1);
            }

            45% {
                transform: scale(1.1);
            }

            60% {
                transform: scale(1);
            }
        }

        .proposal-title {
            font-family: var(--font-romantic);
            font-size: var(--font-size-3xl);
            margin-bottom: var(--space-lg);
            opacity: 0;
            animation: fadeInUp 1s ease forwards;
            animation-delay: 0.3s;
        }

        .proposal-subtitle {
            font-size: var(--font-size-lg);
            opacity: 0.9;
            margin-bottom: var(--space-3xl);
            opacity: 0;
            animation: fadeInUp 1s ease forwards;
            animation-delay: 0.5s;
        }

        /* Button container */
        .button-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
            align-items: center;
            opacity: 0;
            animation: fadeInUp 1s ease forwards;
            animation-delay: 0.8s;
        }

        @media (min-width: 480px) {
            .button-group {
                flex-direction: row;
                justify-content: center;
            }
        }

        .btn-yes {
            background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
            min-width: 140px;
            font-size: var(--font-size-xl);
            padding: var(--space-lg) var(--space-2xl);
        }

        .btn-yes:hover {
            box-shadow: 0 0 40px rgba(16, 185, 129, 0.5);
        }

        .btn-no {
            background: var(--color-overlay);
            min-width: 120px;
            transition: all 0.3s ease;
        }

        /* Popup Modal */
        .popup-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            padding: var(--space-lg);
        }

        .popup-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .popup-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: var(--space-2xl);
            max-width: 320px;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.4s ease;
        }

        .popup-modal.active .popup-content {
            transform: scale(1);
        }

        .popup-emoji {
            font-size: 3rem;
            display: block;
            margin-bottom: var(--space-md);
        }

        .popup-text {
            font-family: var(--font-romantic);
            font-size: var(--font-size-xl);
            margin-bottom: var(--space-lg);
        }

        .popup-close {
            background: var(--color-overlay-strong);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: var(--space-sm) var(--space-xl);
            border-radius: var(--radius-full);
            font-family: var(--font-primary);
            font-size: var(--font-size-base);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .popup-close:hover {
            background: var(--color-overlay);
            transform: scale(1.05);
        }

        /* Confetti container */
        .confetti-container {
            position: fixed;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 50;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confetti-fall linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-20px) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Growing YES button after multiple NO attempts */
        .btn-yes.enlarged {
            transform: scale(1.3);
            animation: pulse-glow 1s ease-in-out infinite;
        }

        @keyframes pulse-glow {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
            }

            50% {
                box-shadow: 0 0 50px rgba(16, 185, 129, 0.8);
            }
        }
    </style>
</head>

<body>
    <!-- Floating Hearts Background -->
    <div class="hearts-bg" aria-hidden="true"></div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Main Content -->
    <main class="page-container">
        <div class="content-wrapper">
            <span class="proposal-emoji" aria-hidden="true">üíù</span>

            <h1 class="proposal-title text-glow">
                Will you be my Valentine?
            </h1>

            <p class="proposal-subtitle">
                I've been waiting to ask you this... üíï
            </p>

            <div class="button-group">
                <button class="btn btn-yes shimmer" id="yesBtn">
                    <span>Yes! üíñ</span>
                </button>
                <button class="btn btn-no" id="noBtn">
                    <span>No...</span>
                </button>
            </div>
        </div>
    </main>

    <!-- Popup Modal -->
    <div class="popup-modal" id="popupModal">
        <div class="popup-content">
            <span class="popup-emoji" id="popupEmoji">ü•∫</span>
            <p class="popup-text" id="popupText">Are you sure?</p>
            <button class="popup-close" id="popupClose">Okay... üíî</button>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        // DOM Elements
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const popupModal = document.getElementById('popupModal');
        const popupEmoji = document.getElementById('popupEmoji');
        const popupText = document.getElementById('popupText');
        const popupClose = document.getElementById('popupClose');
        const confettiContainer = document.getElementById('confettiContainer');

        // NO button messages
        const messages = [
            { emoji: 'ü•∫', text: 'Are you sure?' },
            { emoji: 'üíï', text: 'Please? Pretty please?' },
            { emoji: 'üå∏', text: 'Just one more thought...' },
            { emoji: 'ü¶ã', text: 'What if I say please again?' },
            { emoji: 'üíñ', text: "I won't give up on us!" },
            { emoji: '‚ú®', text: 'The button is getting shy...' }
        ];

        let noClickCount = 0;

        // YES button click
        yesBtn.addEventListener('click', () => {
            // Create celebration confetti
            createConfetti();

            // Navigate after brief celebration
            setTimeout(() => {
                valentineUtils.navigateTo('final.html');
            }, 1500);
        });

        // NO button click
        noBtn.addEventListener('click', () => {
            noClickCount++;
            handleNoClick();
        });

        function handleNoClick() {
            const messageIndex = Math.min(noClickCount - 1, messages.length - 1);
            const message = messages[messageIndex];

            // Update popup
            popupEmoji.textContent = message.emoji;
            popupText.textContent = message.text;

            // Show popup
            popupModal.classList.add('active');

            // After 2 clicks, start shrinking NO button
            if (noClickCount >= 2) {
                const scale = Math.max(0.5, 1 - (noClickCount - 1) * 0.1);
                noBtn.style.transform = `scale(${scale})`;
            }

            // After 4 clicks, make NO button run away
            if (noClickCount >= 4) {
                makeNoButtonRunAway();
            }

            // After 6 clicks, hide NO and enlarge YES
            if (noClickCount >= 6) {
                noBtn.style.opacity = '0';
                noBtn.style.pointerEvents = 'none';
                yesBtn.classList.add('enlarged');
            }
        }

        function makeNoButtonRunAway() {
            const padding = 20;
            const maxX = window.innerWidth - noBtn.offsetWidth - padding;
            const maxY = window.innerHeight - noBtn.offsetHeight - padding;

            const randomX = padding + Math.random() * (maxX - padding);
            const randomY = padding + Math.random() * (maxY - padding);

            noBtn.style.position = 'fixed';
            noBtn.style.left = `${randomX}px`;
            noBtn.style.top = `${randomY}px`;
            noBtn.style.zIndex = '50';
        }

        // Close popup
        popupClose.addEventListener('click', () => {
            popupModal.classList.remove('active');
        });

        // Click outside popup to close
        popupModal.addEventListener('click', (e) => {
            if (e.target === popupModal) {
                popupModal.classList.remove('active');
            }
        });

        // Create confetti celebration
        function createConfetti() {
            const colors = ['#ff85a2', '#a855f7', '#10b981', '#ffd6e7', '#ffffff'];
            const shapes = ['circle', 'square'];

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';

                const color = colors[Math.floor(Math.random() * colors.length)];
                const shape = shapes[Math.floor(Math.random() * shapes.length)];
                const left = Math.random() * 100;
                const delay = Math.random() * 0.5;
                const duration = 2 + Math.random() * 2;

                confetti.style.backgroundColor = color;
                confetti.style.borderRadius = shape === 'circle' ? '50%' : '0';
                confetti.style.left = `${left}%`;
                confetti.style.animationDelay = `${delay}s`;
                confetti.style.animationDuration = `${duration}s`;

                confettiContainer.appendChild(confetti);
            }
        }
    </script>
</body>

</html>